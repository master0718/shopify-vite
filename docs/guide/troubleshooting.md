# Troubleshooting

If the suggestions here don't work, please try posting questions on [GitHub Discussions](https://github.com/barrel/shopify-vite/discussions).

## How to launch the Shopify and Vite servers in parallel? {#launch-shopify-vite}

You can use [`concurrently`](https://github.com/open-cli-tools/concurrently) or [`npm-run-all`](https://github.com/mysticatea/npm-run-all) and [script commands](https://docs.npmjs.com/cli/v8/using-npm/scripts) to launch Vite and Shopify servers in parallel.

::: code-group

```json [package.json]
  "version": "0.0.0",
  "private": true,
  "type": "module",
  "scripts": {
    "dev": "vite", // [!code --]
    "dev": "run-p -sr \"shopify:dev -- {@}\" \"vite:dev\" --", // [!code ++]
    "deploy": "run-s \"build\" \"shopify:push -- {@}\" --", // [!code ++]
    "shopify:dev": "shopify theme dev", // [!code ++]
    "vite:dev": "vite", // [!code ++]
    "shopify:push": "shopify theme push", // [!code ++]
    "build": "vite build"
  },
  "devDependencies": {
    "npm-run-all": "^4.1.5", // [!code ++]
    "vite": "^4.2.1",
    "vite-plugin-shopify": "^2.0.2"
  }
}
```
:::

```bash
$ npm run dev -- --store johns-apparel --live-reload full-page
```

## How to cleanup the `assets/` folder?

To clean up the `assets/` folder, you can disable the default behavior of Vite emptying the
`outDir` directory on build. Instead, use the
[vite-plugin-shopify-clean](https://www.npmjs.com/package/@by-association-only/vite-plugin-shopify-clean)
plugin developed by the [BAO](https://www.byassociationonly.com/) engineering team.
This plugin allows you to remove only the files generated by Vite,
while preserving any code added by third-party apps in the `assets/` folder.

```bash
$ npm i -D @by-association-only/vite-plugin-shopify-clean
```

::: code-group

```js [vite.config.js]
import shopify from 'vite-plugin-shopify'
import cleanup from '@by-association-only/vite-plugin-shopify-clean' // [!code ++]

export default {
  build: { // [!code ++]
    emptyOutDir: false // [!code ++]
  }, // [!code ++]
  plugins: [
    cleanup(), // [!code ++]
    shopify()
  ]
}
```
